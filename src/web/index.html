<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="ChickAPI - Visual API Flow Designer | Design and test API workflows in your browser">
    <title>ChickAPI - Visual API Flow Designer</title>
    
    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="/favicon.svg">
    
    <!-- Styles -->
    <link rel="stylesheet" href="../renderer/styles/main.css">
    <link rel="stylesheet" href="../renderer/styles/canvas.css">
    <link rel="stylesheet" href="../renderer/styles/nodes.css">
    <link rel="stylesheet" href="../renderer/styles/panels.css">
    <link rel="stylesheet" href="./styles/web.css">
</head>
<body>
    <!-- Main Application Container -->
    <div id="app-container">
        <!-- Web-specific header -->
        <div id="web-header" class="web-header">
            <div class="web-logo">
                <svg width="32" height="32" viewBox="0 0 200 200" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <circle cx="100" cy="100" r="90" fill="#1e1e1e" stroke="#2196f3" stroke-width="4"/>
                    <rect x="40" y="40" width="50" height="30" rx="4" fill="#4CAF50"/>
                    <rect x="110" y="40" width="50" height="30" rx="4" fill="#2196F3"/>
                    <rect x="75" y="90" width="50" height="30" rx="4" fill="#FF9800"/>
                    <rect x="40" y="140" width="50" height="30" rx="4" fill="#9C27B0"/>
                    <rect x="110" y="140" width="50" height="30" rx="4" fill="#F44336"/>
                    <path d="M65 70 L100 90" stroke="#666" stroke-width="2"/>
                    <path d="M135 70 L100 90" stroke="#666" stroke-width="2"/>
                    <path d="M100 120 L65 140" stroke="#666" stroke-width="2"/>
                    <path d="M100 120 L135 140" stroke="#666" stroke-width="2"/>
                    <circle cx="100" cy="105" r="15" fill="#fff" stroke="#333" stroke-width="2"/>
                </svg>
                <span class="web-title">ChickAPI</span>
            </div>
            <div class="web-actions">
                <button class="web-btn" id="btn-github" title="View on GitHub">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/>
                    </svg>
                </button>
                <button class="web-btn" id="btn-fullscreen" title="Fullscreen">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M8 3H5a2 2 0 0 0-2 2v3m18 0V5a2 2 0 0 0-2-2h-3m0 18h3a2 2 0 0 0 2-2v-3M3 16v3a2 2 0 0 0 2 2h3"/>
                    </svg>
                </button>
            </div>
        </div>

        <!-- Toolbar -->
        <div id="toolbar" class="toolbar">
            <div class="toolbar-section">
                <button class="toolbar-btn" id="btn-new" title="New Workflow">
                    <svg width="20" height="20" viewBox="0 0 24 24">
                        <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm5 11h-4v4h-2v-4H7v-2h4V7h2v4h4v2z"/>
                    </svg>
                </button>
                <button class="toolbar-btn" id="btn-open" title="Open Workflow">
                    <svg width="20" height="20" viewBox="0 0 24 24">
                        <path d="M10 4H4c-1.11 0-2 .89-2 2v12c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V8c0-1.11-.89-2-2-2h-8l-2-2z"/>
                    </svg>
                </button>
                <button class="toolbar-btn" id="btn-save" title="Save Workflow">
                    <svg width="20" height="20" viewBox="0 0 24 24">
                        <path d="M17 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V7l-4-4zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3zm3-10H5V5h10v4z"/>
                    </svg>
                </button>
            </div>
            <div class="toolbar-section">
                <button class="toolbar-btn" id="btn-undo" title="Undo">
                    <svg width="20" height="20" viewBox="0 0 24 24">
                        <path d="M12.5 8c-2.65 0-5.05.99-6.9 2.6L2 7v9h9l-3.62-3.62c1.39-1.16 3.16-1.88 5.12-1.88 3.54 0 6.55 2.31 7.6 5.5l2.37-.78C21.08 11.03 17.15 8 12.5 8z"/>
                    </svg>
                </button>
                <button class="toolbar-btn" id="btn-redo" title="Redo">
                    <svg width="20" height="20" viewBox="0 0 24 24">
                        <path d="M18.4 10.6C16.55 8.99 14.15 8 11.5 8c-4.65 0-8.58 3.03-9.96 7.22L3.9 16c1.05-3.19 4.05-5.5 7.6-5.5 1.95 0 3.73.72 5.12 1.88L13 16h9V7l-3.6 3.6z"/>
                    </svg>
                </button>
            </div>
            <div class="toolbar-section">
                <button class="toolbar-btn" id="btn-run" title="Run Workflow">
                    <svg width="20" height="20" viewBox="0 0 24 24">
                        <path d="M8 5v14l11-7z"/>
                    </svg>
                </button>
                <button class="toolbar-btn" id="btn-stop" title="Stop Execution" disabled>
                    <svg width="20" height="20" viewBox="0 0 24 24">
                        <rect x="6" y="6" width="12" height="12"/>
                    </svg>
                </button>
            </div>
            <div class="toolbar-section">
                <button class="toolbar-btn" id="btn-zoom-in" title="Zoom In">
                    <svg width="20" height="20" viewBox="0 0 24 24">
                        <path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14zM12 10h-2v2H9v-2H7V9h2V7h1v2h2v1z"/>
                    </svg>
                </button>
                <button class="toolbar-btn" id="btn-zoom-out" title="Zoom Out">
                    <svg width="20" height="20" viewBox="0 0 24 24">
                        <path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14zM7 9h5v1H7z"/>
                    </svg>
                </button>
                <button class="toolbar-btn" id="btn-zoom-fit" title="Fit to Screen">
                    <svg width="20" height="20" viewBox="0 0 24 24">
                        <path d="M15 3l2.3 2.3-2.89 2.87 1.42 1.42L18.7 6.7 21 9V3zM3 9l2.3-2.3 2.87 2.89 1.42-1.42L6.7 5.3 9 3H3zm18 6l-2.3 2.3-2.87-2.89-1.42 1.42 2.89 2.87L15 21h6zm-6 0l-2.3-2.3-2.89 2.87-1.42-1.42L11.3 17.3 9 15v6h6z"/>
                    </svg>
                </button>
            </div>
            <div class="toolbar-section right">
                <span class="zoom-level" id="zoom-level">100%</span>
            </div>
        </div>

        <!-- Main Content Area -->
        <div id="main-content" class="main-content">
            <!-- Node Palette Sidebar -->
            <div id="node-palette" class="node-palette">
                <div class="palette-header">
                    <h3>Nodes</h3>
                    <input type="text" id="node-search" class="node-search" placeholder="Search nodes...">
                </div>
                <div class="palette-content" id="palette-content">
                    <!-- Node categories will be inserted here -->
                </div>
            </div>

            <!-- Canvas Container -->
            <div id="canvas-container" class="canvas-container">
                <div id="minimap" class="minimap">
                    <canvas id="minimap-canvas"></canvas>
                </div>
                <canvas id="main-canvas" class="main-canvas"></canvas>
                <div id="connection-layer" class="connection-layer">
                    <svg id="connection-svg" class="connection-svg">
                        <defs>
                            <marker id="arrow" markerWidth="10" markerHeight="10" refX="8" refY="3" orient="auto" markerUnits="strokeWidth">
                                <path d="M0,0 L0,6 L9,3 z" fill="#999" />
                            </marker>
                        </defs>
                    </svg>
                </div>
                <div id="node-layer" class="node-layer">
                    <!-- Nodes will be rendered here -->
                </div>
            </div>

            <!-- Properties Panel -->
            <div id="properties-panel" class="properties-panel">
                <div class="panel-header">
                    <h3 id="properties-title">Properties</h3>
                </div>
                <div class="panel-content" id="properties-content">
                    <!-- Properties will be inserted here based on selection -->
                    <div class="empty-state">
                        <p>Select a node to view its properties</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Console/Log Panel -->
        <div id="console-panel" class="console-panel">
            <div class="console-header">
                <h3>Console</h3>
                <div class="console-actions">
                    <button class="console-btn" id="btn-clear-console" title="Clear Console">Clear</button>
                    <button class="console-btn" id="btn-toggle-console" title="Toggle Console">â–¼</button>
                </div>
            </div>
            <div class="console-content" id="console-content">
                <!-- Log messages will be inserted here -->
            </div>
        </div>
    </div>

    <!-- Context Menus -->
    <div id="canvas-context-menu" class="context-menu" style="display: none;">
        <div class="menu-item" data-action="paste">Paste</div>
        <div class="menu-separator"></div>
        <div class="menu-item" data-action="select-all">Select All</div>
    </div>

    <div id="node-context-menu" class="context-menu" style="display: none;">
        <div class="menu-item" data-action="duplicate">Duplicate</div>
        <div class="menu-item" data-action="delete">Delete</div>
        <div class="menu-separator"></div>
        <div class="menu-item" data-action="copy">Copy</div>
        <div class="menu-item" data-action="cut">Cut</div>
        <div class="menu-separator"></div>
        <div class="menu-item" data-action="bring-to-front">Bring to Front</div>
        <div class="menu-item" data-action="send-to-back">Send to Back</div>
    </div>

    <!-- Load Application Scripts -->
    <script type="module" src="./app.ts"></script>
</body>
</html>
